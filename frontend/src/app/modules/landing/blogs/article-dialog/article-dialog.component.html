<div class="flex flex-col max-w-full">
    <div class="flex items-center justify-between p-6 border-b">
        <h2 class="text-2xl font-bold">
            {{ mode === "create" ? "Create New Article" : "Edit Article" }}
        </h2>
        <button mat-icon-button (click)="cancel()">
            <mat-icon [svgIcon]="'heroicons_outline:x'"></mat-icon>
        </button>
    </div>

    <form
        [formGroup]="articleForm"
        class="flex flex-col p-6 gap-6 overflow-y-auto"
        style="max-height: 70vh"
    >
        <!-- Title -->
        <mat-form-field>
            <mat-label>Title</mat-label>
            <input matInput formControlName="title" required />
            <mat-error *ngIf="articleForm.get('title').hasError('required')">
                Title is required
            </mat-error>
        </mat-form-field>

        <!-- Content -->
        <mat-form-field>
            <mat-label>Content</mat-label>
            <textarea
                matInput
                formControlName="content"
                rows="6"
                required
            ></textarea>
            <mat-error *ngIf="articleForm.get('content').hasError('required')">
                Content is required
            </mat-error>
        </mat-form-field>

        <div>
            <label class="text-md font-medium">Upload Image (optional)</label>
            <input type="file" (change)="onFileSelected($event)" class="mt-2" />
        </div>

        <!-- OR: keep URL if user wants external images -->
        <mat-form-field>
            <mat-label>Image URL (optional)</mat-label>
            <input matInput formControlName="image" placeholder="https://..." />
        </mat-form-field>

        <!-- Tags -->
        <mat-form-field>
            <mat-label>Tags (comma-separated)</mat-label>
            <input
                matInput
                formControlName="tags"
                placeholder="e.g. technology, news, tutorial"
            />
            <mat-hint>Separate tags with commas</mat-hint>
        </mat-form-field>

        <!-- Actions -->
        <div class="flex items-center justify-end gap-4 pt-4">
            <button mat-button type="button" (click)="cancel()">Cancel</button>
            <button
                mat-flat-button
                color="primary"
                type="button"
                (click)="save()"
                [disabled]="articleForm.invalid || loading"
            >
                <mat-spinner
                    *ngIf="loading"
                    diameter="20"
                    class="mr-2"
                ></mat-spinner>
                <span>{{ mode === "create" ? "Create" : "Save" }}</span>
            </button>
        </div>
    </form>
</div>
