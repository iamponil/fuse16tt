<div class="flex flex-col flex-auto min-w-0">

    <!-- Header -->
    <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between px-6 py-4 border-b bg-card">
        <div>
            <div class="text-2xl font-semibold tracking-tight leading-8">Dashboard</div>
            <div class="text-secondary">Content Management Overview</div>
        </div>
        <div class="flex items-center mt-4 sm:mt-0">
            <button
                class="ml-3"
                mat-flat-button
                [color]="'primary'"
                (click)="refreshData()">
                <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:arrow-path'"></mat-icon>
                <span class="ml-2">Refresh Data</span>
            </button>
        </div>
    </div>
  
    <!-- Main -->
    <div class="flex-auto border-t -mt-px pt-4 sm:pt-6">
        <div class="w-full max-w-screen-xl mx-auto">
            <!-- Tabs -->
            <mat-tab-group
                class="sm:px-2"
                mat-stretch-tabs="false"
                [animationDuration]="'0'">

                <!-- Home -->
                <mat-tab label="Home">
                    <ng-template matTabContent>
                        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 w-full min-w-0">
                            <!-- Total Articles -->
                            <div class="flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden">
                                <div class="flex items-start justify-between">
                                    <div class="text-lg font-medium tracking-tight leading-6 truncate">Total Articles</div>
                                    <div class="ml-2 -mt-2 -mr-3">
                                        <button
                                            mat-icon-button
                                            [matMenuTriggerFor]="articlesMenu">
                                            <mat-icon
                                                class="icon-size-5"
                                                [svgIcon]="'heroicons_mini:ellipsis-vertical'"></mat-icon>
                                        </button>
                                        <mat-menu #articlesMenu="matMenu">
                                            <button mat-menu-item (click)="refreshData()">Refresh</button>
                                            <button mat-menu-item>Export</button>
                                        </mat-menu>
                                    </div>
                                </div>
                                <div class="flex flex-col items-center mt-2">
                                    <div class="text-7xl sm:text-8xl font-bold tracking-tight leading-none text-blue-500">
                                        {{data?.rawData?.articles?.summary?.total || 0}}
                                    </div>
                                    <div class="text-lg font-medium text-blue-600 dark:text-blue-500">Articles</div>
                                    <div class="flex items-baseline justify-center w-full mt-5 text-secondary">
                                        <div class="text-md font-medium truncate">Published:</div>
                                        <div class="ml-1.5 text-lg font-semibold">{{data?.rawData?.articles?.summary?.published || 0}}</div>
                                    </div>
                                </div>
                            </div>
                            <!-- Draft Articles -->
                            <div class="flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden">
                                <div class="flex items-start justify-between">
                                    <div class="text-lg font-medium tracking-tight leading-6 truncate">Drafts</div>
                                    <div class="ml-2 -mt-2 -mr-3">
                                        <button
                                            mat-icon-button
                                            [matMenuTriggerFor]="draftsMenu">
                                            <mat-icon
                                                class="icon-size-5"
                                                [svgIcon]="'heroicons_mini:ellipsis-vertical'"></mat-icon>
                                        </button>
                                        <mat-menu #draftsMenu="matMenu">
                                            <button mat-menu-item (click)="refreshData()">Refresh</button>
                                            <button mat-menu-item>View All</button>
                                            <button mat-menu-item>Export</button>
                                        </mat-menu>
                                    </div>
                                </div>
                                <div class="flex flex-col items-center mt-2">
                                    <div class="text-7xl sm:text-8xl font-bold tracking-tight leading-none text-amber-500">
                                        {{data?.rawData?.articles?.summary?.drafts || 0}}
                                    </div>
                                    <div class="text-lg font-medium text-amber-600 dark:text-amber-500">Draft Articles</div>
                                    <div class="flex items-baseline justify-center w-full mt-5 text-secondary">
                                        <div class="text-md font-medium truncate">Avg. Read Time:</div>
                                        <div class="ml-1.5 text-lg font-semibold">{{data?.rawData?.articles?.summary?.averageReadTimeMinutes || 0}}m</div>
                                    </div>
                                </div>
                            </div>
                            <!-- Total Users -->
                            <div class="flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden">
                                <div class="flex items-start justify-between">
                                    <div class="text-lg font-medium tracking-tight leading-6 truncate">Total Users</div>
                                    <div class="ml-2 -mt-2 -mr-3">
                                        <button
                                            mat-icon-button
                                            [matMenuTriggerFor]="usersMenu">
                                            <mat-icon
                                                class="icon-size-5"
                                                [svgIcon]="'heroicons_mini:ellipsis-vertical'"></mat-icon>
                                        </button>
                                        <mat-menu #usersMenu="matMenu">
                                            <button mat-menu-item (click)="refreshData()">Refresh</button>
                                            <button mat-menu-item>View All</button>
                                            <button mat-menu-item>Export</button>
                                        </mat-menu>
                                    </div>
                                </div>
                                <div class="flex flex-col items-center mt-2">
                                    <div class="text-7xl sm:text-8xl font-bold tracking-tight leading-none text-indigo-500">
                                        {{data?.rawData?.users?.summary?.total || 0}}
                                    </div>
                                    <div class="text-lg font-medium text-indigo-600 dark:text-indigo-500">Users</div>
                                    <div class="flex items-baseline justify-center w-full mt-5 text-secondary">
                                        <div class="text-md font-medium truncate">Active (30d):</div>
                                        <div class="ml-1.5 text-lg font-semibold">{{data?.rawData?.users?.summary?.activeLast30Days || 0}}</div>
                                    </div>
                                </div>
                            </div>
                            <!-- New Users -->
                            <div class="flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden">
                                <div class="flex items-start justify-between">
                                    <div class="text-lg font-medium tracking-tight leading-6 truncate">New Users</div>
                                    <div class="ml-2 -mt-2 -mr-3">
                                        <button
                                            mat-icon-button
                                            [matMenuTriggerFor]="newUsersMenu">
                                            <mat-icon
                                                class="icon-size-5"
                                                [svgIcon]="'heroicons_mini:ellipsis-vertical'"></mat-icon>
                                        </button>
                                        <mat-menu #newUsersMenu="matMenu">
                                            <button mat-menu-item>View All</button>
                                            <button mat-menu-item>Export</button>
                                        </mat-menu>
                                    </div>
                                </div>
                                <div class="flex flex-col items-center mt-2">
                                    <div class="text-7xl sm:text-8xl font-bold tracking-tight leading-none text-green-500">
                                        {{data?.rawData?.users?.summary?.newLast30Days || 0}}
                                    </div>
                                    <div class="text-lg font-medium text-green-600 dark:text-green-500">Last 30 Days</div>
                                    <div class="flex items-baseline justify-center w-full mt-5 text-secondary">
                                        <div class="text-md font-medium truncate">Growth Rate:</div>
                                        <div class="ml-1.5 text-lg font-semibold">
                                            {{((data?.rawData?.users?.summary?.newLast30Days || 0) / (data?.rawData?.users?.summary?.total || 1) * 100).toFixed(1)}}%
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Article Activity Summary -->
                            <div class="sm:col-span-2 md:col-span-4 flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden">
                                <div class="flex flex-col sm:flex-row items-start justify-between">
                                    <div class="text-lg font-medium tracking-tight leading-6 truncate">Article Activity Summary</div>
                                    <div class="mt-3 sm:mt-0 sm:ml-2">
                                        <mat-button-toggle-group
                                            value="this-week"
                                            #articleActivityWeekSelector="matButtonToggleGroup">
                                            <mat-button-toggle value="last-week">Last Week</mat-button-toggle>
                                            <mat-button-toggle value="this-week">This Week</mat-button-toggle>
                                        </mat-button-toggle-group>
                                    </div>
                                </div>
                                <div class="grid grid-cols-1 lg:grid-cols-2 grid-flow-row gap-6 w-full mt-8 sm:mt-4">
                                    <!-- Articles Created Chart -->
                                    <div class="flex flex-col flex-auto">
                                        <div class="font-medium text-secondary">Articles Created Over Time</div>
                                        <div class="flex flex-col flex-auto">
                                            <apx-chart
                                                *ngIf="chartArticleActivity.series"
                                                class="flex-auto w-full h-80"
                                                [chart]="chartArticleActivity.chart"
                                                [colors]="chartArticleActivity.colors"
                                                [dataLabels]="chartArticleActivity.dataLabels"
                                                [grid]="chartArticleActivity.grid"
                                                [labels]="chartArticleActivity.labels"
                                                [legend]="chartArticleActivity.legend"
                                                [plotOptions]="chartArticleActivity.plotOptions"
                                                [series]="chartArticleActivity.series[articleActivityWeekSelector.value]"
                                                [states]="chartArticleActivity.states"
                                                [stroke]="chartArticleActivity.stroke"
                                                [tooltip]="chartArticleActivity.tooltip"
                                                [xaxis]="chartArticleActivity.xaxis"
                                                [yaxis]="chartArticleActivity.yaxis"></apx-chart>
                                        </div>
                                    </div>
                                    <!-- Overview Stats -->
                                    <div class="flex flex-col">
                                        <div class="font-medium text-secondary">Overview</div>
                                        <div *ngIf="data?.articleActivity?.overview" class="flex-auto grid grid-cols-4 gap-4 mt-6">
                                            <!-- Total Articles -->
                                            <div class="col-span-2 flex flex-col items-center justify-center py-8 px-1 rounded-2xl bg-blue-50 text-blue-800 dark:bg-white dark:bg-opacity-5 dark:text-blue-400">
                                                <div class="text-5xl sm:text-7xl font-semibold leading-none tracking-tight">
                                                    {{data.articleActivity.overview[articleActivityWeekSelector.value]['total-articles']}}
                                                </div>
                                                <div class="mt-1 text-sm sm:text-lg font-medium">Total Articles</div>
                                            </div>
                                            <!-- Published -->
                                            <div class="col-span-2 flex flex-col items-center justify-center py-8 px-1 rounded-2xl bg-green-50 text-green-800 dark:bg-white dark:bg-opacity-5 dark:text-green-500">
                                                <div class="text-5xl sm:text-7xl font-semibold leading-none tracking-tight">
                                                    {{data.articleActivity.overview[articleActivityWeekSelector.value]['published']}}
                                                </div>
                                                <div class="mt-1 text-sm sm:text-lg font-medium">Published</div>
                                            </div>
                                            <!-- Drafts -->
                                            <div class="col-span-2 flex flex-col items-center justify-center py-8 px-1 rounded-2xl bg-amber-50 text-amber-800 dark:bg-white dark:bg-opacity-5 dark:text-amber-400">
                                                <div class="text-5xl font-semibold leading-none tracking-tight">
                                                    {{data.articleActivity.overview[articleActivityWeekSelector.value]['drafts']}}
                                                </div>
                                                <div class="mt-1 text-sm font-medium text-center">Drafts</div>
                                            </div>
                                            <!-- New Users -->
                                            <div class="col-span-2 flex flex-col items-center justify-center py-8 px-1 rounded-2xl bg-indigo-50 text-indigo-800 dark:bg-white dark:bg-opacity-5 dark:text-indigo-400">
                                                <div class="text-5xl font-semibold leading-none tracking-tight">
                                                    {{data.articleActivity.overview[articleActivityWeekSelector.value]['new-users']}}
                                                </div>
                                                <div class="mt-1 text-sm font-medium text-center">New Users</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Article Status Distribution -->
                            <div class="sm:col-span-2 md:col-span-4 lg:col-span-2 flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden">
                                <div class="flex flex-col sm:flex-row items-start justify-between">
                                    <div class="text-lg font-medium tracking-tight leading-6 truncate">Article Status Distribution</div>
                                    <div class="mt-3 sm:mt-0 sm:ml-2">
                                        <mat-button-toggle-group
                                            value="this-week"
                                            #statusDistributionWeekSelector="matButtonToggleGroup">
                                            <mat-button-toggle value="last-week">Last Week</mat-button-toggle>
                                            <mat-button-toggle value="this-week">This Week</mat-button-toggle>
                                        </mat-button-toggle-group>
                                    </div>
                                </div>
                                <div class="flex flex-col flex-auto mt-6">
                                    <apx-chart
                                        *ngIf="chartArticleStatusDistribution.series"
                                        class="flex-auto w-full h-80"
                                        [chart]="chartArticleStatusDistribution.chart"
                                        [labels]="chartArticleStatusDistribution.labels"
                                        [legend]="chartArticleStatusDistribution.legend"
                                        [plotOptions]="chartArticleStatusDistribution.plotOptions"
                                        [series]="chartArticleStatusDistribution.series[statusDistributionWeekSelector.value]"
                                        [states]="chartArticleStatusDistribution.states"
                                        [stroke]="chartArticleStatusDistribution.stroke"
                                        [theme]="chartArticleStatusDistribution.theme"
                                        [tooltip]="chartArticleStatusDistribution.tooltip"
                                        [yaxis]="chartArticleStatusDistribution.yaxis"></apx-chart>
                                </div>
                                <div *ngIf="data?.articleStatusDistribution?.overview" class="grid grid-cols-2 border-t divide-x -m-6 mt-4 bg-gray-50 dark:bg-transparent">
                                    <div class="flex flex-col items-center justify-center p-6 sm:p-8">
                                        <div class="text-5xl font-semibold leading-none tracking-tighter">
                                            {{data.articleStatusDistribution.overview[statusDistributionWeekSelector.value]['drafts']}}
                                        </div>
                                        <div class="mt-1 text-center text-secondary">Draft Articles</div>
                                    </div>
                                    <div class="flex flex-col items-center justify-center p-6 sm:p-8">
                                        <div class="text-5xl font-semibold leading-none tracking-tighter">
                                            {{data.articleStatusDistribution.overview[statusDistributionWeekSelector.value]['published']}}
                                        </div>
                                        <div class="mt-1 text-center text-secondary">Published Articles</div>
                                    </div>
                                </div>
                            </div>
                            <!-- Top Articles by Engagement -->
                            <div class="sm:col-span-2 md:col-span-4 lg:col-span-2 flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden">
                                <div class="flex flex-col sm:flex-row items-start justify-between">
                                    <div class="text-lg font-medium tracking-tight leading-6 truncate">Top Articles by Engagement</div>
                                    <div class="mt-3 sm:mt-0 sm:ml-2">
                                        <mat-button-toggle-group
                                            value="top5"
                                            #topArticlesSelector="matButtonToggleGroup">
                                            <mat-button-toggle value="top5">Top 5</mat-button-toggle>
                                            <mat-button-toggle value="next5">Next 5</mat-button-toggle>
                                        </mat-button-toggle-group>
                                    </div>
                                </div>
                                <div class="flex flex-col mt-2 divide-y">
                                    <ng-container *ngFor="let article of data?.topArticles?.[topArticlesSelector.value]; trackBy: trackByFn">
                                        <div class="flex flex-row items-center justify-between py-4 px-0.5">
                                            <div class="flex flex-col flex-auto">
                                                <div class="font-medium truncate">{{article.title}}</div>
                                                <div class="flex flex-col sm:flex-row sm:items-center -ml-0.5 mt-2 sm:mt-1 space-y-1 sm:space-y-0 sm:space-x-3">
                                                    <div class="flex items-center">
                                                        <mat-icon
                                                            class="icon-size-5 text-hint"
                                                            [svgIcon]="'heroicons_solid:chat-bubble-left-right'"></mat-icon>
                                                        <div class="ml-1.5 text-md text-secondary">{{article.comments}} comments</div>
                                                    </div>
                                                    <div class="flex items-center">
                                                        <mat-icon
                                                            class="icon-size-5 text-hint"
                                                            [svgIcon]="'heroicons_solid:eye'"></mat-icon>
                                                        <div class="ml-1.5 text-md text-secondary">{{article.views}} views</div>
                                                    </div>
                                                </div>
                                            </div>
                                            <button mat-icon-button>
                                                <mat-icon [svgIcon]="'heroicons_mini:chevron-right'"></mat-icon>
                                            </button>
                                        </div>
                                    </ng-container>
                                </div>
                            </div>
                        </div>
                    </ng-template>
                </mat-tab>

              

             

            </mat-tab-group>
        </div>
    </div>

</div>
